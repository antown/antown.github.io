<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Статическая перезагрузка сайта</title>
    <meta name="description" content="Как и зачем я перенес свой сайт на Jekyll.">
    <meta name="keywords" content="джекил, сайт, статический генератор">
    <link rel="canonical" href="http://likewhoa.ru/blog/going-static/">
    <link rel="alternate" type="application/rss+xml" title="Likewhoa" href="/feed.xml" />
    <!-- google search console -->
    <meta name="google-site-verification" content="FpxZXaSmPze2lNe7uty69AA9cZZT6meINY4n2VCDZCg" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/style.css?201911051504" type="text/css">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css'>
    <!-- Open Graph -->
    <meta property="og:locale" content="ru">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Статическая перезагрузка сайта">
    <meta property="og:description" content="Картинки и тексты.">
    <meta property="og:url" content="http://likewhoa.ru/blog/going-static/">
    <meta property="og:site_name" content="Likewhoa">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Статическая перезагрузка сайта" />
    <meta name="twitter:description" content="Как и зачем я перенес свой сайт на Jekyll." />
    <meta name="twitter:url" content="http://likewhoa.ru/blog/going-static/" />
    
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=YAo5ogjjko">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=YAo5ogjjko">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=YAo5ogjjko">
    <link rel="shortcut icon" href="/favicon.ico?v=YAo5ogjjko">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="theme-color" content="#ffffff">
</head>
<body class="animated fadeIn">
<article class="menu">	
	<div class="bread">
		<ol class="bread-list">
			<li class="home">
				<a href="/">
					Index
				</a>
			</li>
			<li><a href="/Blog/">Blog</a></li>
			<li>Статическая перезагрузка сайта</li>
		</ol>
	</div>
	<div>
		<form class="search-container" action="https://www.google.com/search" method="GET">
			<input id="search-box" type="text" class="search-box" name="q" />
			<label for="search-box">
				<span class="search-icon">
					<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path fill-rule="evenodd" clip-rule="evenodd" d="M11.9479 6.15909C11.9479 8.92051 9.70931 11.1591 6.94788 11.1591C4.18646 11.1591 1.94788 8.92051 1.94788 6.15909C1.94788 3.39766 4.18646 1.15909 6.94788 1.15909C9.70931 1.15909 11.9479 3.39766 11.9479 6.15909ZM10.8227 10.7402C9.77734 11.6254 8.42494 12.1591 6.94788 12.1591C3.63418 12.1591 0.947884 9.4728 0.947884 6.15909C0.947884 2.84538 3.63418 0.159088 6.94788 0.159088C10.2616 0.159088 12.9479 2.84538 12.9479 6.15909C12.9479 7.63574 12.4145 8.98779 11.5298 10.0331L16.7974 15.3007C16.9927 15.496 16.9927 15.8126 16.7974 16.0078C16.6022 16.2031 16.2856 16.2031 16.0903 16.0078L10.8227 10.7402Z">
					</svg>
				</span>
			</label>
			<input type="hidden" name="sitesearch" value="likewhoa.ru">
		</form>
	</div>

		<!--
		<div>
			<a href="/feed.xml">
				<span class="rss-icon">
					<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path fill-rule="evenodd" clip-rule="evenodd" d="M0.949764 10.6467C0.949764 10.3706 1.17362 10.1467 1.44976 10.1467C4.4867 10.1467 6.94862 12.6086 6.94862 15.6456C6.94862 15.9217 6.72477 16.1456 6.44862 16.1456C6.17248 16.1456 5.94862 15.9217 5.94862 15.6456C5.94862 13.1609 3.93442 11.1467 1.44976 11.1467C1.17362 11.1467 0.949764 10.9228 0.949764 10.6467Z"/>
						<path fill-rule="evenodd" clip-rule="evenodd" d="M0.949764 5.64784C0.949764 5.3717 1.17362 5.14784 1.44976 5.14784C7.24749 5.14784 11.9475 9.84783 11.9475 15.6456C11.9475 15.9217 11.7236 16.1456 11.4475 16.1456C11.1713 16.1456 10.9475 15.9217 10.9475 15.6456C10.9475 10.4001 6.69521 6.14784 1.44976 6.14784C1.17362 6.14784 0.949764 5.92398 0.949764 5.64784Z"/>
						<path fill-rule="evenodd" clip-rule="evenodd" d="M0.949764 0.648987C0.949764 0.372844 1.17362 0.148987 1.44976 0.148987C10.0083 0.148987 16.9463 7.08704 16.9463 15.6456C16.9463 15.9217 16.7225 16.1456 16.4463 16.1456C16.1702 16.1456 15.9463 15.9217 15.9463 15.6456C15.9463 7.63933 9.456 1.14899 1.44976 1.14899C1.17362 1.14899 0.949764 0.925129 0.949764 0.648987Z"/>
						<path d="M2.97483 15.1367C2.97483 15.6954 2.52196 16.1482 1.96331 16.1482C1.40466 16.1482 0.95179 15.6954 0.95179 15.1367C0.95179 14.5781 1.40466 14.1252 1.96331 14.1252C2.52196 14.1252 2.97483 14.5781 2.97483 15.1367Z"/>
					</svg>
				</span>
			</a>
		</div>
		дальше можно просто добавлять иконки
		<div>b2</div>
		<div>b3</div>
		<div>b4</div>
		-->
</article>
<aside>
<h1>Статическая перезагрузка сайта</h1>
<span class="icon">&nbsp;</span>


<p class="subtitle">Современные принципы веб-разработки требуют не меньшего внимания от дизайнера, чем проектирование видимой части сайтов. Ежедневно встречая незнакомые термины, чувствуешь себя явно отстающим.</p>

<p>Это всегда заставляло меня думать: «Вот дерьмо, я же ничего про это не знаю, надо скорее учиться». Но этот момент всегда откладывался, так как реальной причины изучить всё не было. Единственное, что могло дать толчок — сделать что-то свое, без особой ответственности перед другими, ведь явно не всё получится сразу.</p>
<p>Последние 5 лет все сайты клиентов, которые делала наша лаборатория, мои личные проекты и сайты друзей — все работали на CMS разной степени сложности. При этом у них у всех была одна общая черта: функциональность была запредельно высокой и явно избыточной. Например, у Вордпресса есть стандартная возможность обновлять сайт через iOS приложение. Насколько круто бы это не звучало, сама идея абсурдна: я ни разу в жизни не испытывал необходимости написать пост, находясь вдалеке от моего ноута. Особенно, если речь идет о большой странице с картинками.</p>
<p>Вторая общая черта этих CMS: все они работали с базами данных, как правило, MySQL. Все страницы генерируются на лету, движок оборачивает содержимое шаблоном и показывает пользователю на сайте. Это занимает некоторое время. Все осложняется различными плагинами, часто плохо написанными, особенностями настройки <a href="http://wordpress.org/extend/plugins/w3-total-cache/">W3 Total Cache</a> и проблемами безопасности.</p>

<h2>Я маньяк контроля</h2>

<p>Основное, что подтолкнуло меня перейти на статические генераторы сайтов, это <em>контроль</em>. Попытка приручить контент, обернутый петлями CMS, функциями и кодом, который я не до конца понимаю да и вовсе не писал, было пустой тратой времени. Сверстать шаблон для прошлого движка Эгея было пыткой: от версии к версии менялась внутренняя структура да и в целом существование проекта остается под вопросом.</p>
<p>Удовольствия это не приносило никакого и я забросил блог на год с лишним, даже не смотря на то, что под рукой теперь были инструменты для публикации в блог <em>откуда угодно</em> и в <em>любое время</em>. На выбор осталось 2 варианта: забросить все окончательно или построить систему с нуля, собственноручно, избавившись от всех ненужных свистелок и перделок.</p>

<h2>Приручение Jekyll</h2>

<p>Разбираться с базами данных и функциями вызова переменных не было никакого желания, делать разрозненные HTML-странички — тем более. Совершенно случайно под руку попался <a href="http://cactusformac.com">Cactus</a> — предельно простой генератор статических сайтов, использующий язык шаблонов Jango. Но этот проект был слишком сырой и с мутными перспективами. Сложнее блога на стандартном макете или 2-3 страничек собрать в нем было рискованно: что-нибудь обязательно переставало работать или же требовало неординарных хаков. </p>
<p>На слуху был Jekyll, но он жутко пугал отсутствием интерфейса и массой незнакомых терминов. Но погуглив пару-тройку абстрактных вопросов относительно того, как в нём реализованы разные функции, сомнений не осталось: у джекила огромное сообщество, великолепная документация и мощная поддержка авторов проекта.</p>

<p>Теперь для публикации поста или страницы нужно:</p>

<ol>
<li>Создать текстовый файл с разметкой Markdown.</li>
<li>Добавить YAML Front Matter заголовок в начало этого файла, в котором указано, какой шаблон использовать, мета-данные страницы (заголовок, время и дата создания), картинка обложки, категория и теги.</li>
<li>Запустить `jekyll` в терминале.</li>
<li>Загрузить готовый сайт на гитхаб.</li>
</ol>

<p>Процесс может немного отличаться от раза к разу, но в целом это минимально необходимые шаги после того, как все шаблоны и блоки в `_layouts` и `_includes` сверстаны и подготовлены.</p>
<p>Процесс немногим более сложный, чем написание поста в Вордпрессе, ощутимо привлекательнее тем, что дает полный контроль над каждой мелочью. Я могу сам определить структуру сайта и папок, входящих в него; настроить иерархию; использовать любую автоматизацию, наподобие <a href="http://gruntjs.com/">Grunt</a> для оптимизации всего на свете и т. д. Разумеется, все это доступно практически в каждой CMS, но далеко не всегда так же прозрачно и часто требует кастомизации и дописывания кода для корректной работы.</p>
<p>Нельзя не отметить, что Jekyll — не для каждого. С ним непременно придется испачкать руки, разбираясь в формировании XML карт сайта, RSS, функции вызова социальных кнопок и куче других вещей, которые есть в Вордпрессе сразу из коробки. Но для меня изучение этих деталей и создание чего-то с нуля несло намного больше вдохновение, чем установка очередного плагина в Вордпрессе, который сделает все автоматически.</p>
<p>Jekyll помог мне достичь нескольких важных целей: плотнее познакомиться с базовыми принципами HTML5 и CSS3; дал возможность делать страницы с уникальным в рамках сайта дизайном и структурой; разобраться с CSS препроцессорами типа <a href="http://lesscss.org/">LESS</a> и перестать теряться в гигантском файле стилей и сделать сайт адаптивным.</p>

<h2>Что вдохновило в процессе</h2>

<h3>HTML5 Boilerplate</h3>

<p>Одной из самых значимых вещей в процессе ознакомления с HTML5 было изучение <a href="http://html5boilerplate.com/">HTML5 Boilerplate</a>. Все файлы очень подробно прокомментированы, поэтому понять что, как и почему используется действительно легко. В качестве удобного справочника по элементам типа `figure`, `section`, `article` и т.д. я использовал <a href="http://html5doctor.com/ «HTML5 Doctor»">HTML5 Doctor</a>.</p>

<h3>Less is More</h3>

<div class="with-side">
<p>Принцип препроцессоров отпугнул меня сразу, как только я впервые услышал про <a href="http://lesscss.org/">Less</a> и <a href="http://sass-lang.com/about/">Sass</a>. Борьба с CSS в факультативном режиме и так довалась мне не легко, а внесение еще одного уровня сложности к этому казалось абсурдным. Вторым знакомством была попытка хотя бы поэкспериментировать с Less, тем более нашелся простой и наглядный инструмент — <a href="https://incident57.com/codekit/">CodeKit</a>. Принцип использования переменных для шрифтов и цветов выглядел привлекательно, но будучи дизайнером мне не сильно-то хотелось сталкиваться с это не-совсем-дружелюбной-средой из области программирования.</p>
	<div class="side">
    	<span>
    		К моменту создания текущей темы оформления я перешел с Less на Sass, полюбил <a href="http://bourbon.io/">Bourbon</a> <del>за название</del> а так же <a href="http://neat.bourbon.io/">Neat</a> для управления mixin’ами и сеткой.
    	</span>
	</div>
</div>



<p>Основная прелесть Less для меня — синтаксис. Можно даже ничего не менять в существующих css файлах, достаточно было изменить расширение файлов с .css на .less и все уже работало. Все новое можно внедрять постепенно. Использование переменных и миксинов помогает очень быстро собрать прототип страницы и позволяет мыслить модульно и комплексно.
</p>

<h2>Модульные сетки</h2>

<p>Больше всего в модульных сетках меня отталкивает их антисемантическая структура. Я никогда не хотел дружить с абстрактными `.grid_x`, .`push_x` или `col_x`. Это здорово для больших проектов, быстрого прототипирования или разработки, но в своем проекте хотелось обойтись ванильным css. Не сказать, что это получилось идеально, но благодаря <a href="http://coding.smashingmagazine.com/2011/08/23/the-semantic-grid-system-page-layout-for-tomorrow/">ряду статей</a> и <a href="http://semantic.gs/">проектов</a> задел на будущее сделан.</p>

<h2>Перезагрузка проекта</h2>

<p>Переход на Jekyll подтолкнул меня к полной реструктуризации сайта. Я буду стараться писать большие и цельные статьи в блог, с нормальным оформлением, а мелкие заметки, цитаты и картинки переедут на отдельную страницу или в свой раздел.</p>

<h2>Что осталось доделать</h2>

<p>Перенос постов из прошлого движка наконец-то завершен, в чем мне сильно помог <a href="https://ru.wikipedia.org/wiki/Automator">Автоматор</a> в OS X. Хоть записей в блоге не так уж и много, но заполнить для каждого имя файла и 5-6 полей в YAML-заголовке — ужасная рутина. Многим не хватает новых элементов, которых не было в прошлом шаблоне: обложки и превью страницы; большого количества новых блоков верстки типа сносок и так далее.</p>

<h3>Адаптивная графика</h3>

<p>Отдельным пунктом стоит доработка и оптимизация картинок. Если остальные составляющие оптимизированы худо-бедно, то с картинками придется основательно потрудится. Сейчас они оптимизированы алгоритмами сжатия без потерь, что экономит до 60% веса файла, но все равно загружаются в полном масштабе. Научить Джекилл нарезать их для в разных размерах для десктопов и смартфонов еще предстоит и будет <a href="http://www.alistapart.com/articles/responsive-images-how-they-almost-worked-and-what-we-need/">очень не просто</a>, так что этот пункт задвинут в самый конец очереди.</p>

<h3>Контроль версий</h3>

<p>Выкладывать исходники сайта в открытый доступ пока не хватает духу, ребята засмеют же. Так что для контроля версий я использую приватный репозиторий на BitBucket, в то время как сайт публикую на <a href="http://github.com/antown">GitHub</a>. Такое разделение позволяет познакомиться с системами более плотно и выбрать более удобную, раз уж они обе поддерживают бесплатный хостинг статических сайтов.</p>

</aside>

<article class="footer">
  <div class="f-left">Последняя запись — 
 
30
октября
  
2019,
 всего их 61. Jekyll 3.8.5.
</div>
<div>tg @antwon</div>
</article>
<script src='https://cdn.polyfill.io/v2/polyfill.min.js?features=es6,Array.prototype.includes,CustomEvent,Object.entries,Object.values,URL'></script>
<script src='https://unpkg.com/plyr@3'></script>
<script src="/static/index.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/lazysizes/4.0.2/lazysizes.min.js'></script>
<!-- google counter -->
  <script type="text/javascript">
  
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26451647-3']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  
  </script>
<!-- end google counter -->
<!-- Yandex.Metrika counter --> <script type="text/javascript" > (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(11453989, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, trackHash:true }); </script> <noscript><div><img src="https://mc.yandex.ru/watch/11453989" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
</body>
</html>